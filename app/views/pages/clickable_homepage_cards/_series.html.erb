<% show_progress ||= false %>
<% card_class = nil
   card_class = series.completed_before_deadline?(current_user) ? "colored-success" : "colored-danger" if series.deadline.present?%>
<%= link_to course_path(series.course, series: series, anchor: series.anchor) do %>
  <div class="card card-supporting-text series card-clickable <%= card_class %>" style="height: 100px">
    <div class="card-subtitle mb-1">
      <%= render partial: 'series/series_status', locals: {loaded: true, series: series, user: current_user} %>
      <h4 class="ellipsis-overflow" title="<%= series.name %>" style="width: 100%">
        <%= series.name %><br>
        <div style="display: flex; flex-direction: row; justify-content: space-between;" >
          <span class="ellipsis-overflow" style="flex: 2">
            <small  title="<%= series.course.name %>">
              <%= series.course.name %>
            </small>
          </span>
          <span style="flex: 1; text-align: right">
          <%= render partial: 'deadlines/relative', locals: {deadline: series.deadline, met: series.completed_before_deadline?(current_user) }%>
          </span>
        </div>
      </h4>
    </div>
    <% if show_progress %>
      <%= render partial: 'progress_chart', locals: {
        total: series.activity_count,
        tried: series.started_activity_count(current_user),
        correct: series.completed_activity_count(current_user),
        info_tried: 'pages.clickable_homepage_cards.series.progress_chart_info_tried',
        info_correct: 'pages.clickable_homepage_cards.series.progress_chart_info_correct',
        width: '100%',
      } %>
    <% else %>
        <small class="ellipsis-overflow">
            <%= t ".jump_back_in_info" %>
        </small>
    <% end %>
  </div>
<% end %>
